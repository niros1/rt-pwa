(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+dY6":function(e,t,n){"use strict";var i=n("CcnG"),l=n("A7o+"),a=n("Roc6"),o=n("Ip0R"),s=n("VNI8"),r=n("w4cN"),c=n("ETj5");n("oA9F"),n("/yY+"),n.d(t,"a",function(){return u}),n.d(t,"b",function(){return v});var u=i["\u0275crt"]({encapsulation:0,styles:[[".message[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;-webkit-transform:translateY(-8%);transform:translateY(-8%)}.message.cardShown[_ngcontent-%COMP%]{-webkit-transform:translateY(-13%);transform:translateY(-13%)}.message[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{text-align:center}.message[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20vh}.message[_ngcontent-%COMP%]   .textual[_ngcontent-%COMP%]{width:90%;margin:2% 5%;text-align:center}.message[_ngcontent-%COMP%]   .textual[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:140%;font-weight:600;margin:0;color:#393c46}.message[_ngcontent-%COMP%]   .textual[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:.2em 0}.message[_ngcontent-%COMP%]   .textual[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;font-size:100%;font-weight:600}.message[_ngcontent-%COMP%]   .textual[_ngcontent-%COMP%]   .extra[_ngcontent-%COMP%]{font-size:90%;font-weight:400}.message[_ngcontent-%COMP%]   .textual[_ngcontent-%COMP%]     a{color:#00afaa;text-decoration:none}.message[_ngcontent-%COMP%]   .textual[_ngcontent-%COMP%]   .pay-method[_ngcontent-%COMP%]{font-size:1.4rem}.message[_ngcontent-%COMP%]   .textual[_ngcontent-%COMP%]   .pay-method[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.7rem;letter-spacing:.2rem;margin-right:.5rem}.message[_ngcontent-%COMP%]   .textual[_ngcontent-%COMP%]   .pay-method[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:.2rem}.message[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]{width:90%;display:flex;justify-content:center;padding-top:1rem}.message[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{width:90%;margin:1rem;text-align:center;border-radius:3px;background-color:#393c46}.message[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]     button.here-button{width:100%;color:#fff;border:0;border-radius:4px;font-size:1rem;font-family:inherit;line-height:initial}"]],data:{}});function d(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,0,"img",[],[[8,"src",4]],[[null,"error"]],function(e,t,n){var i=!0;return"error"===t&&(i=0!=(e.component.imgError=!0)&&i),i},null,null))],null,function(e,t){e(t,0,0,t.component.visual)})}function g(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"span",[["class","details"]],[[8,"innerHTML",1]],null,null,null,null)),i["\u0275pid"](131072,l.i,[l.j,i.ChangeDetectorRef]),i["\u0275ppd"](2,1)],null,function(e,t){var n=t.component,l=i["\u0275unv"](t,0,0,e(t,2,0,i["\u0275nov"](t.parent,0),i["\u0275unv"](t,0,0,i["\u0275nov"](t,1).transform(n.details))));e(t,0,0,l)})}function p(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"img",[["alt","card"],["appImgError",""]],[[8,"src",4]],[[null,"error"]],function(e,t,n){var l=!0;return"error"===t&&(l=!1!==i["\u0275nov"](e,1).hideMe(n)&&l),l},null,null)),i["\u0275did"](1,16384,null,0,a.a,[i.ElementRef],null,null)],null,function(e,t){var n=t.component;e(t,0,0,n.CardIcon[n.payMethod.brand])})}function f(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,5,"div",[["class","bold dark pay-method"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,1,"span",[["class","bolder"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022"])),(e()(),i["\u0275ted"](3,null,[""," "])),(e()(),i["\u0275and"](16777216,null,null,1,null,p)),i["\u0275did"](5,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,5,0,n.CardIcon[n.payMethod.brand])},function(e,t){e(t,3,0,t.component.payMethod.last_4_digits)})}function m(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,2,"span",[["class","extra"]],[[8,"innerHTML",1]],null,null,null,null)),i["\u0275pid"](131072,l.i,[l.j,i.ChangeDetectorRef]),i["\u0275ppd"](2,1)],null,function(e,t){var n=t.component,l=i["\u0275unv"](t,0,0,e(t,2,0,i["\u0275nov"](t.parent,0),i["\u0275unv"](t,0,0,i["\u0275nov"](t,1).transform(n.extra))));e(t,0,0,l)})}function h(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,5,"div",[["class","back-container"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,4,"div",[["class","btn-container"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,3,"hwc-button",[["class","btn"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.backToRide()&&i),i},s.d,s.a)),i["\u0275did"](3,49152,null,0,r.a,[],null,null),(e()(),i["\u0275ted"](4,0,["",""])),i["\u0275pid"](131072,l.i,[l.j,i.ChangeDetectorRef])],null,function(e,t){e(t,4,0,i["\u0275unv"](t,4,0,i["\u0275nov"](t,5).transform("backToRide")))})}function v(e){return i["\u0275vid"](0,[i["\u0275pid"](0,c.a,[]),(e()(),i["\u0275eld"](1,0,null,null,17,"div",[["class","message"]],null,null,null,null,null)),i["\u0275did"](2,278528,null,0,o.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](3,{cardShown:0}),(e()(),i["\u0275eld"](4,0,null,null,2,"div",[["class","visual"]],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,1,null,d)),i["\u0275did"](6,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275eld"](7,0,null,null,9,"div",[["class","textual"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,2,"h1",[["data-testid","message-title"]],null,null,null,null,null)),(e()(),i["\u0275ted"](9,null,["",""])),i["\u0275pid"](131072,l.i,[l.j,i.ChangeDetectorRef]),(e()(),i["\u0275and"](16777216,null,null,1,null,g)),i["\u0275did"](12,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,f)),i["\u0275did"](14,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,m)),i["\u0275did"](16,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),i["\u0275and"](16777216,null,null,1,null,h)),i["\u0275did"](18,16384,null,0,o.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component,i=e(t,3,0,n.cardShown);e(t,2,0,"message",i),e(t,6,0,!n.imgError),e(t,12,0,n.details),e(t,14,0,n.payMethod),e(t,16,0,n.extra),e(t,18,0,n.showBackButton)},function(e,t){var n=t.component;e(t,9,0,i["\u0275unv"](t,9,0,i["\u0275nov"](t,10).transform(n.title)))})}},"9K/B":function(e,t,n){"use strict";n.d(t,"a",function(){return C});var i,l,a=n("mrSG"),o=n("kooT"),s=n("eUgh"),r=n("a4Oa"),c=n("67Y/"),u=n("nmfW"),d=n("9or0"),g=n("/yY+"),p=n("eaEI"),f=n("CcnG"),m=n("A7o+"),h=((i={})[s.d.UNKNOWN]={visual:"../../../assets/images/carSad.svg",title:"rideStatus.cannotRetrieve",extra:"question"},i[s.d.PROCESSING]={visual:"../../../assets/images/carHappy.svg",title:"rideStatus.getting"},i[s.d.REJECTED]={visual:"../../../assets/images/verificationBlocked.svg",title:"rideStatus.cancellationReject"},i[s.d.ACCEPTED]={visual:"../../../assets/images/thumbsUp.svg",title:"rideStatus.booked",details:"ridePlan",extra:"question"},i[s.d.DRIVER_ASSIGNED]={visual:"../../../assets/images/thumbsUp.svg",title:"rideStatus.booked",details:"ridePlan",extra:"question"},i[s.d.COMPLETED]={visual:"../../../assets/images/thumbsUp.svg",title:"rideStatus.doneRecently",extra:"question"},i[s.d.CANCELLED]={visual:"../../../assets/images/carSad.svg",title:"rideStatus.canceled",details:"rideStatus.seeYou"},i[s.d.FAILURE]={visual:"../../../assets/images/carSad.svg",title:"rideStatus.cannotRetrieve",extra:"question"},i),v=((l={})[s.c.UNKNOWN]={visual:"../../../assets/images/carSad.svg",title:"rideStatus.canceled",details:"rideStatus.seeYou"},l[s.c.DEMANDER]={visual:"../../../assets/images/carSad.svg",title:"rideStatus.canceled",details:"rideStatus.seeYou"},l[s.c.SUPPLIER]={visual:"../../../assets/images/carSad.svg",title:"rideStatus.cancelledBySupplier"},l[s.c.PASSENGER]={visual:"../../../assets/images/carSad.svg",title:"rideStatus.canceled",details:"rideStatus.seeYou"},l[s.c.MARKETPLACE]={visual:"../../../assets/images/carSad.svg",title:"rideStatus.canceled",details:"rideStatus.seeYou"},l),C=function(e){function t(t,n,i,l,a,o,r,c){var u=e.call(this,"MessageScreen",n)||this;u.rideService=i,u.translate=l,u.localizationService=a,u.getAddress=o,u.dateTimeFormat=r,u.analytics=c,u.subscriptions=[];var d={};u.sentEventRideNotAvailable=!1,u.entityCollection=t.getEntityCollectionService("MessageScreen"),u.entityCollection.addOneToCache(h[s.d.PROCESSING]);var g=u.rideService.ride$.subscribe(function(e){e&&((!u.ride||u.ride&&u.ride.status!==e.status)&&u.logMessage(e),u.ride=e,u.entityCollection.clearCache(),(d=u.buildMessage(u.ride))&&d.title&&u.entityCollection.addOneToCache(d))});u.subscriptions.push(g),u.locale=u.localizationService.currentLanguage;var p=u.translate.onLangChange.subscribe(function(e){u.locale=u.localizationService.getLanguage(e.lang)});return u.subscriptions.push(p),u}return a.__extends(t,e),t.prototype.isRideCancelled=function(e){return e.cancellation_info&&s.b.ACCEPTED===e.cancellation_info.status},t.prototype.buildMessage=function(e){var t={};return this.isRideCancelled(e)?this.fillCancellationMessage(t,e):this.isRideNotAvailable(e.status,e.closed_time_ms)?t=this.getRideIsNotAvailable():h[e.status]&&this.fillMessage(t,e),e.status===s.d.COMPLETED&&!this.isRideNotAvailable(e.status,e.closed_time_ms)&&e.payment&&e.payment.pay_method&&e.payment.pay_method.card&&e.payment.pay_method.card.last_4_digits&&(t.details="rideStatus.doneRecently.paid",t.payMethod=e.payment.pay_method.card),t},t.prototype.fillMessage=function(e,t){var n=h[t.status],i=n.title,l=n.details,a=n.extra;e.visual=n.visual,i&&(e.title=i),a&&(e.extra=this.translate.instant(a,{rideId:t.ride_id})),l&&(e.details=l?this.translate.instant(l,{supplierName:t.supplier.local_name||t.supplier.english_name,pickupLocation:this.getAddress.transform(t.route.pickup),pickupTime:this.getPickupTimeAsDateString(t)}):l)},t.prototype.fillCancellationMessage=function(e,t){e.visual=v[t.cancellation_info.cancelling_party].visual,e.details=v[t.cancellation_info.cancelling_party].details,e.title=v[t.cancellation_info.cancelling_party].title?this.translate.instant(v[t.cancellation_info.cancelling_party].title,{supplierName:t.supplier.local_name||t.supplier.english_name}):v[t.cancellation_info.cancelling_party].title},t.prototype.getPickupTimeAsDateString=function(e){return this.dateTimeFormat.transform(e.prebook_pickup_time_ms||Date.now()+1e3*(e.estimated_pickup_time_seconds||0),this.locale?this.locale.nameForPipes:"en-US",e.time_zone,!0)},Object.defineProperty(t.prototype,"message$",{get:function(){return this.entityCollection.entities$.pipe(Object(c.a)(function(e){return e[0]}))},enumerable:!0,configurable:!0}),t.prototype.getCannotRetrieveDetails=function(){return this.analytics.logEvent(g.b.RideDetailsUnavailableLoad),h[s.d.FAILURE]},t.prototype.getProcessing=function(){return h[s.d.PROCESSING]},t.prototype.getCancellationRejected=function(){return{title:"rideStatus.cancellationReject",visual:"../../assets/images/verificationBlocked.svg"}},t.prototype.getRideIsNotAvailable=function(){return this.sentEventRideNotAvailable||(this.analytics.logEvent(g.b.RideUnavailableLoad),this.sentEventRideNotAvailable=!0),{title:"rideStatus.notAvailable",visual:"../../../assets/images/carSad.svg"}},t.prototype.ngOnDestroy=function(){this.subscriptions.filter(Boolean).forEach(function(e){return e.unsubscribe()})},t.prototype.isRideNotAvailable=function(e,t){if(e===s.d.COMPLETED){var n=(new Date).getTime()-18e5;return!t||t<n}return!1},t.prototype.logMessage=function(e){switch(e.status){case s.d.ACCEPTED:case s.d.DRIVER_ASSIGNED:this.analytics.logEvent(g.b.RideTrackerLoadRideBooked,!0);break;case s.d.COMPLETED:this.analytics.logEvent(g.b.RideCompletedLoad,!1,{});break;default:this.analytics.logEvent(g.b.RideTrackerRideStatusUpdated)}},t.ngInjectableDef=f.defineInjectable({factory:function(){return new t(f.inject(o.G),f.inject(o.x),f.inject(r.a),f.inject(m.j),f.inject(p.a),f.inject(u.a),f.inject(d.a),f.inject(g.a))},token:t,providedIn:"root"}),t}(o.w)},"9or0":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("Tk7a"),l=n("CcnG"),a=function(){function e(){}return e.prototype.transform=function(e,t,n,l){if(i.locale(t||"en"),!n)return"\xa0";var a=i().tz(n),o=i(e).tz(n),s=o.isAfter(a,"year")||l?", YYYY":"",r=o.isAfter(a,"day")||l?"MMM D":"";return o.format(""+r+s+(s||r?" | ":"")+"LT")},e.ngInjectableDef=l.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}()},Fe25:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("/yY+"),l=function(){function e(e){this.analytics=e,this.down=!1,this.userSwipe=!1,this.showAnimation=!0,this.firstTimeForceSwipeDown=!1,this.bottom=0}return Object.defineProperty(e.prototype,"distanceFromBottom",{get:function(){return this.bottom+"px"},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){e.autoHideTimeout&&this.checkForceSwipeDown()},e.prototype.ngAfterContentInit=function(){this.contentAsString=this.content.nativeElement.innerHTML,this.swipeDown(),this.checkForceSwipeDown()},e.prototype.ngAfterContentChecked=function(){var e=this.content.nativeElement.innerHTML;e!==this.contentAsString&&(this.showAnimation=!1,this.contentAsString=e,this.swipeDown())},e.prototype.checkForceSwipeDown=function(){var e=this;!this.firstTimeForceSwipeDown&&this.autoHideTimeout&&this.autoHideTimeout>0&&!this.userSwipe&&setTimeout(function(){e.down||e.userSwipe||(e.down=!0,e.firstTimeForceSwipeDown=!0,e.swipeDown())},this.autoHideTimeout)},e.prototype.onTap=function(){this.showAnimation=!0,this.down=!this.down,this.down?(this.swipeDown(),this.analytics.logEvent(i.b.DriverDetailsDrawerClose)):(this.bottom=0,this.analytics.logEvent(i.b.DriverDetailsDrawerOpen))},e.prototype.onSwipeDown=function(){this.showAnimation=!0,this.down=!0,this.userSwipe=!0,this.swipeDown(),this.analytics.logEvent(i.b.DriverDetailsDrawerClose)},e.prototype.onSwipeUp=function(){this.showAnimation=!0,this.down=!1,this.userSwipe=!0,this.bottom=0,this.analytics.logEvent(i.b.DriverDetailsDrawerOpen)},e.prototype.swipeDown=function(){if(this.down){var e=0;this.content.nativeElement&&this.content.nativeElement.querySelector("app-card-ride-details > .body")&&(e-=this.content.nativeElement.querySelector("app-card-ride-details > .body").clientHeight+2),this.content.nativeElement&&this.content.nativeElement.querySelector(".cancel-container")&&(e-=this.content.nativeElement.querySelector(".cancel-container").clientHeight),this.content.nativeElement&&this.content.nativeElement.querySelector(".terms-container")&&(e-=this.content.nativeElement.querySelector(".terms-container").clientHeight),this.content.nativeElement&&this.content.nativeElement.querySelector(".directions-detailed")&&(e-=this.content.nativeElement.querySelector(".directions-detailed").clientHeight+-10),this.bottom=e}},e}()},oA9F:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n("/yY+"),l=n("HQqM"),a=function(){function e(e,t){this._location=e,this.analytics=t}return Object.defineProperty(e.prototype,"CardIcon",{get:function(){return l.a},enumerable:!0,configurable:!0}),e.prototype.backToRide=function(){this.analytics.logEvent(i.b.RideCancellationBackToRideClick),this._location.back()},e}()},syPK:function(e,t,n){"use strict";var i=n("CcnG"),l=n("Ip0R");n("Fe25"),n("/yY+"),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var a=i["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{position:absolute;bottom:0;background:#fff;width:100%;z-index:1;padding-top:.3rem;border-radius:30px 30px 0 0;min-height:6rem;max-height:50vh;box-shadow:0 -1px 52px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);overflow:scroll}.animation[_nghost-%COMP%]{transition:all .11s}.arrow-container[_ngcontent-%COMP%]{text-align:center;overflow:hidden;height:100%;min-height:.5rem;position:absolute;width:100%;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.arrow-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.3rem;transition-delay:.11s}.arrow-container[_ngcontent-%COMP%]   img.rotate[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.content-wrapper[_ngcontent-%COMP%]{padding-top:.5rem}"]],data:{}});function o(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{content:0}),(e()(),i["\u0275eld"](1,0,null,null,5,"div",[["class","arrow-container"]],null,[[null,"swipedown"],[null,"swipeup"],[null,"click"]],function(e,t,n){var i=!0,l=e.component;return"swipedown"===t&&(i=!1!==l.onSwipeDown()&&i),"swipeup"===t&&(i=!1!==l.onSwipeUp()&&i),"click"===t&&(i=!1!==l.onTap()&&i),i},null,null)),i["\u0275did"](2,278528,null,0,l.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["\u0275pod"](3,{down:0,up:1}),(e()(),i["\u0275eld"](4,0,null,null,2,"img",[["src","../../../assets/icons/arrow.svg"]],null,null,null,null,null)),i["\u0275did"](5,278528,null,0,l.NgClass,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer2],{ngClass:[0,"ngClass"]},null),i["\u0275pod"](6,{rotate:0}),(e()(),i["\u0275eld"](7,0,[[1,0],["contentWrapper",1]],null,1,"div",[["class","content-wrapper"]],null,null,null,null,null)),i["\u0275ncd"](null,0)],function(e,t){var n=t.component,i=e(t,3,0,n.down,!n.down);e(t,2,0,"arrow-container",i);var l=e(t,6,0,n.down);e(t,5,0,l)},null)}}}]);